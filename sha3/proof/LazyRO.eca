require import Option NewFSet NewFMap.
require (*..*) RO.

type from, to.
op d: to distr.

clone include RO with
  type from <- from,
  type to   <- to.

module H : RO, RO_ = {
  var m : (from, to) fmap

  proc init() = { m = map0; }

  proc oracle(x) = {
    if (!mem (dom m) x) m.[x] = $d;
    return oget m.[x];
  }
}.
